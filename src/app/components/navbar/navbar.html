<div>
    <mat-toolbar class="!bg-gradient-to-r from-green-700 to-emerald-600 px-12 py-3 flex justify-between items-center shadow-xl text-white">
        <!-- Logo -->
        <a [routerLink]="['/']" class="flex items-center gap-2 group">
            <img src="images/greencodeLogo.jpg" alt="Logo" class="h-10 w-10 rounded-full border-2 border-white shadow-md group-hover:scale-105 transition-transform duration-300" />
            <span class="text-white font-bold text-xl tracking-wide group-hover:text-green-100 transition-colors duration-300">
        Sentry House
      </span>
        </a>

        <!-- Menú -->
        <div class="flex gap-8 items-center">
            <!-- Admin Menu -->
            <div *ngIf="isLoggedIn() && authService.getUserDetail()?.roles.includes('Admin'); else userMenu" class="flex gap-6 items-center">
                <a [routerLink]="['users']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">groups</mat-icon> Usuarios
                </a>
                <a [routerLink]="['roles']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">settings</mat-icon> Roles
                </a>
                <a [routerLink]="['proveedores']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">inventory_2</mat-icon> Proveedores
                </a>
                <a [routerLink]="['materia-prima']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">science</mat-icon> Materia Prima
                </a>
                <a [routerLink]="['compras']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">inventory_2</mat-icon> Compras
                </a>
                <a [routerLink]="['servicios']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">toc</mat-icon> Servicios
                </a>
                <a [routerLink]="['ventas']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">inventory_2</mat-icon> Ventas
                </a>
                <a [routerLink]="['comentarios']" class="nav-link text-white hover:text-green-100">
                    <mat-icon class="text-white">comment</mat-icon> Comentarios
                </a>
            </div>

            <!-- User Menu -->
            <ng-template #userMenu>
                <div *ngIf="isLoggedIn() && authService.getUserDetail()?.roles.includes('User')" class="flex gap-6 items-center">
                    <a [routerLink]="['']" class="nav-link text-white hover:text-green-100">
                        <mat-icon class="text-white">home</mat-icon> Home
                    </a>
                    <a [routerLink]="['historico']" class="nav-link text-white hover:text-green-100">
                        <mat-icon class="text-white">list</mat-icon> Histórico
                    </a>
                    <a [routerLink]="['comentarios']" class="nav-link text-white hover:text-green-100">
                        <mat-icon class="text-white">comment</mat-icon> Comentarios
                    </a>
                </div>
            </ng-template>

            @if (!(isLoggedIn() && authService.getUserDetail()?.roles.includes('Admin'))) {
            <a [routerLink]="['/contactanos']" class="nav-link text-white hover:text-green-100">
                <mat-icon class="text-white">mail</mat-icon> Contáctanos
            </a>
            <a [routerLink]="['/cotizar']" class="nav-link text-white hover:text-green-100">
                <mat-icon class="text-white">mail</mat-icon> Cotizar
            </a>
            }
        </div>

        <!-- Perfil -->
        <div *ngIf="isLoggedIn() && authService.getUserDetail() as userDetail">
            <div class="flex items-center gap-4">
                <a [matMenuTriggerFor]="menu" class="flex items-center gap-2 cursor-pointer">
                    <div class="bg-red-500 text-white font-bold shadow-lg rounded-full w-10 h-10 flex justify-center items-center border border-white hover:scale-110 transition-all duration-300">
                        {{ userDetail.fullName[0]?.toUpperCase() }}
                    </div>
                    <div class="text-white text-sm">
                        <div class="font-medium">{{ userDetail.fullName }}</div>
                        <div class="text-xs opacity-80">{{ userDetail.roles }}</div>
                    </div>
                </a>
                <mat-menu #menu="matMenu">
                    <button [routerLink]="['account', userDetail.id]" mat-menu-item>
            <mat-icon>account_circle</mat-icon>
            <span>Ver Perfil</span>
          </button>
                    <button routerLink="/change-password" mat-menu-item>
            <mat-icon>lock</mat-icon>
            <span>Cambiar Contraseña</span>
          </button>
                    <button (click)="logout()" mat-menu-item>
            <mat-icon>logout</mat-icon>
            <span>Salir</span>
          </button>
                </mat-menu>
            </div>
        </div>
    </mat-toolbar>
</div>